import{d as ps,q as hs,v as ys,x as y,y as fs,z as gs,c as k,e,k as C,w as a,u as ks,g as d,o as _,a as s,h as l,A as F,t as i,b as p,F as z,r as S,B as bs,C as ws,D as f,E as Cs,i as As,p as Is,G as xs,j as $s,s as zs,n as Ss,H as Ds,I as Ts,_ as Ps}from"./main-94b2c6d3.js";const Ms={class:"dashboard"},Rs={key:0,class:"loading-container"},Vs={class:"header-content"},Bs={class:"welcome-title"},Ls={class:"header-stats"},Ns={class:"stat-badge"},Us={class:"stat-value"},qs={class:"stat-badge"},Es={class:"stat-value"},Fs={class:"user-info"},Hs={class:"username"},Ks={class:"dashboard-grid"},js={class:"card-header"},Gs={class:"progress-content"},Js={class:"progress-stats"},Os={class:"stat-item"},Qs={class:"stat-value"},Ws={class:"stat-item"},Xs={class:"stat-value"},Ys={class:"stat-item"},Zs={class:"stat-value"},st={class:"card-header"},tt={class:"ai-content"},et={class:"ai-avatar"},at={class:"ai-message"},lt={class:"ai-features"},nt={class:"chat-input"},ot={class:"card-header"},it={class:"recommendation-list"},dt=["onClick"],rt={class:"poem-info"},ut={class:"poem-title"},ct={class:"poem-meta"},_t={class:"poem-tags"},mt={class:"poem-action"},vt={class:"stats-content"},pt={class:"stat-chart"},ht={class:"chart-item"},yt={class:"chart-item"},ft={class:"chart-item"},gt={class:"chart-item"},kt={class:"chart-item"},bt={class:"chart-item"},wt={class:"chart-item"},Ct={class:"stats-summary"},At={class:"summary-item"},It={class:"summary-value"},xt={class:"summary-item"},$t={class:"summary-value"},zt={class:"quick-actions"},St={class:"card-header"},Dt={class:"reminder-content"},Tt={class:"reminder-actions"},Pt=ps({__name:"Dashboard",setup(Mt){const I=ks(),o=hs(),x=ys(),H=Cs,D=As,K=Is,j=xs,T=$s,G=zs,J=Ss,O=Ds,Q=Ts,W=y("dashboard"),b=y(""),$=y(!0),X=y(2),Y=y(["个性化解析","进度跟踪","智能推荐","即时答疑"]),A=y({message:"您有2首诗词待解析，建议今天完成学习任务。",actionText:"开始学习"}),Z=y([{id:"1",title:"静夜思",author:"李白",dynasty:"唐代",tags:["思乡","月亮"]},{id:"2",title:"春晓",author:"孟浩然",dynasty:"唐代",tags:["春天","自然"]},{id:"3",title:"登鹳雀楼",author:"王之涣",dynasty:"唐代",tags:["登高","哲理"]}]),ss=()=>{console.log("查看进度详情")},ts=()=>{console.log("刷新推荐")},P=r=>{I.push(`/analysis/${r}`)},es=()=>{console.log("查看学习路径")},as=()=>{console.log("查看成就")},ls=()=>{I.push("/poems")},ns=()=>{A.value=null},os=r=>{I.push(`/${r}`)},is=()=>{x.createConversation()},M=async()=>{if(b.value.trim())try{await x.sendMessage(b.value),b.value=""}catch(r){console.error("发送消息失败:",r)}};return fs(async()=>{try{await o.loadUser()?await x.loadConversations():console.log("用户未登录，显示登录界面"),await new Promise(t=>setTimeout(t,100)),$.value=!1}catch(r){console.error("Dashboard初始化失败:",r),$.value=!1}}),gs(r=>(console.error("Dashboard组件错误:",r),!1)),(r,t)=>{const ds=d("el-skeleton"),c=d("el-icon"),w=d("el-menu-item"),rs=d("el-menu"),us=d("el-aside"),R=d("el-avatar"),cs=d("el-header"),h=d("el-button"),_s=d("el-progress"),g=d("el-card"),V=d("el-tag"),ms=d("el-input"),vs=d("el-main"),B=d("el-container");return _(),k("div",Ms,[$.value?(_(),k("div",Rs,[e(ds,{rows:10,animated:""})])):(_(),C(B,{key:1,class:"dashboard-container"},{default:a(()=>[e(us,{width:"280px",class:"sidebar"},{default:a(()=>[t[8]||(t[8]=s("div",{class:"logo"},[s("h2",{class:"logo-title"},"诗韵星"),s("p",{class:"logo-subtitle"},"AI驱动诗词解析平台")],-1)),e(rs,{"default-active":W.value,class:"sidebar-menu",onSelect:os},{default:a(()=>[e(w,{index:"dashboard",class:"menu-item"},{default:a(()=>[e(c,null,{default:a(()=>[e(l(H))]),_:1}),t[3]||(t[3]=s("span",null,"工作台",-1))]),_:1}),e(w,{index:"poems",class:"menu-item"},{default:a(()=>[e(c,null,{default:a(()=>[e(l(D))]),_:1}),t[4]||(t[4]=s("span",null,"诗词解析",-1))]),_:1}),e(w,{index:"library",class:"menu-item"},{default:a(()=>[e(c,null,{default:a(()=>[e(l(T))]),_:1}),t[5]||(t[5]=s("span",null,"诗词库",-1))]),_:1}),e(w,{index:"recommendations",class:"menu-item"},{default:a(()=>[e(c,null,{default:a(()=>[e(l(G))]),_:1}),t[6]||(t[6]=s("span",null,"今日推荐",-1))]),_:1}),l(o).isTeacher?(_(),C(w,{key:0,index:"teacher",class:"menu-item"},{default:a(()=>[e(c,null,{default:a(()=>[e(l(K))]),_:1}),t[7]||(t[7]=s("span",null,"教学管理",-1))]),_:1})):F("",!0)]),_:1},8,["default-active"])]),_:1}),e(B,null,{default:a(()=>[e(cs,{class:"header"},{default:a(()=>{var n,u,m,v;return[s("div",Vs,[s("h1",Bs,"欢迎回来，"+i((n=l(o).user)==null?void 0:n.username)+"！",1),s("div",Ls,[s("div",Ns,[t[9]||(t[9]=s("span",{class:"stat-label"},"连续学习",-1)),s("span",Us,i(((u=l(o).user)==null?void 0:u.streakDays)||0)+"天",1)]),s("div",qs,[t[10]||(t[10]=s("span",{class:"stat-label"},"今日任务",-1)),s("span",Es,i(X.value)+"/3",1)])]),s("div",Fs,[e(R,{size:40,src:(m=l(o).user)==null?void 0:m.avatar},null,8,["src"]),s("span",Hs,i((v=l(o).user)==null?void 0:v.username),1)])])]}),_:1}),e(vs,{class:"main-content"},{default:a(()=>[s("div",Ks,[e(g,{class:"progress-card",shadow:"hover"},{header:a(()=>[s("div",js,[t[12]||(t[12]=s("span",{class:"card-title"},"学习进度",-1)),e(h,{type:"text",onClick:ss},{default:a(()=>[...t[11]||(t[11]=[p("查看详情",-1)])]),_:1})])]),default:a(()=>{var n,u,m,v;return[s("div",Gs,[e(_s,{percentage:((n=l(o).user)==null?void 0:n.learningProgress)||0,"stroke-width":12,class:"main-progress"},null,8,["percentage"]),s("div",Js,[s("div",Os,[t[13]||(t[13]=s("span",{class:"stat-label"},"已解析诗词",-1)),s("span",Qs,i(((u=l(o).user)==null?void 0:u.analyzedPoems)||0),1)]),s("div",Ws,[t[14]||(t[14]=s("span",{class:"stat-label"},"平均得分",-1)),s("span",Xs,i(((m=l(o).user)==null?void 0:m.averageScore)||0),1)]),s("div",Ys,[t[15]||(t[15]=s("span",{class:"stat-label"},"掌握度",-1)),s("span",Zs,i(((v=l(o).user)==null?void 0:v.masteryLevel)||"初级"),1)])])])]}),_:1}),e(g,{class:"ai-card",shadow:"hover"},{header:a(()=>[s("div",st,[t[17]||(t[17]=s("span",{class:"card-title"},"AI诗词导师",-1)),e(h,{type:"primary",size:"small",onClick:is},{default:a(()=>[...t[16]||(t[16]=[p(" 开始对话 ",-1)])]),_:1})])]),default:a(()=>[s("div",tt,[s("div",et,[e(R,{size:60,src:"/api/placeholder/60/60"})]),s("div",at,[t[18]||(t[18]=s("p",null,"您好！我是您的专属AI诗词导师，随时为您提供个性化解析和指导。",-1)),s("div",lt,[(_(!0),k(z,null,S(Y.value,n=>(_(),C(V,{key:n,size:"small"},{default:a(()=>[p(i(n),1)]),_:2},1024))),128))])])]),s("div",nt,[e(ms,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=n=>b.value=n),placeholder:"输入您的问题...",onKeyup:bs(M,["enter"])},{append:a(()=>[e(h,{onClick:M},{default:a(()=>[e(c,null,{default:a(()=>[e(l(j))]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(g,{class:"recommendation-card",shadow:"hover"},{header:a(()=>[s("div",ot,[t[20]||(t[20]=s("span",{class:"card-title"},"今日推荐",-1)),e(h,{type:"text",onClick:ts},{default:a(()=>[...t[19]||(t[19]=[p("换一批",-1)])]),_:1})])]),default:a(()=>[s("div",it,[(_(!0),k(z,null,S(Z.value,n=>(_(),k("div",{key:n.id,class:"poem-item",onClick:u=>P(n.id)},[s("div",rt,[s("h4",ut,i(n.title),1),s("p",ct,i(n.author)+" · "+i(n.dynasty),1),s("div",_t,[(_(!0),k(z,null,S(n.tags,u=>(_(),C(V,{key:u,size:"small",type:"info"},{default:a(()=>[p(i(u),1)]),_:2},1024))),128))])]),s("div",mt,[e(h,{type:"primary",size:"small",onClick:ws(u=>P(n.id),["stop"])},{default:a(()=>[...t[21]||(t[21]=[p(" 开始解析 ",-1)])]),_:1},8,["onClick"])])],8,dt))),128))])]),_:1}),e(g,{class:"stats-card",shadow:"hover"},{header:a(()=>[...t[22]||(t[22]=[s("span",{class:"card-title"},"学习统计",-1)])]),default:a(()=>{var n,u,m,v,L,N,U,q,E;return[s("div",vt,[s("div",pt,[s("div",ht,[s("div",{class:"chart-bar",style:f({height:`${((n=l(o).user)==null?void 0:n.weeklyActivity)||0}%`})},null,4),t[23]||(t[23]=s("span",null,"一",-1))]),s("div",yt,[s("div",{class:"chart-bar",style:f({height:`${(((u=l(o).user)==null?void 0:u.weeklyActivity)||0)+20}%`})},null,4),t[24]||(t[24]=s("span",null,"二",-1))]),s("div",ft,[s("div",{class:"chart-bar",style:f({height:`${(((m=l(o).user)==null?void 0:m.weeklyActivity)||0)+40}%`})},null,4),t[25]||(t[25]=s("span",null,"三",-1))]),s("div",gt,[s("div",{class:"chart-bar",style:f({height:`${(((v=l(o).user)==null?void 0:v.weeklyActivity)||0)+60}%`})},null,4),t[26]||(t[26]=s("span",null,"四",-1))]),s("div",kt,[s("div",{class:"chart-bar",style:f({height:`${(((L=l(o).user)==null?void 0:L.weeklyActivity)||0)+80}%`})},null,4),t[27]||(t[27]=s("span",null,"五",-1))]),s("div",bt,[s("div",{class:"chart-bar",style:f({height:`${(((N=l(o).user)==null?void 0:N.weeklyActivity)||0)+100}%`})},null,4),t[28]||(t[28]=s("span",null,"六",-1))]),s("div",wt,[s("div",{class:"chart-bar",style:f({height:`${(((U=l(o).user)==null?void 0:U.weeklyActivity)||0)+60}%`})},null,4),t[29]||(t[29]=s("span",null,"日",-1))])]),s("div",Ct,[s("div",At,[t[30]||(t[30]=s("span",{class:"summary-label"},"本周学习",-1)),s("span",It,i(((q=l(o).user)==null?void 0:q.weeklyStudyTime)||0)+"小时",1)]),s("div",xt,[t[31]||(t[31]=s("span",{class:"summary-label"},"完成率",-1)),s("span",$t,i(((E=l(o).user)==null?void 0:E.completionRate)||0)+"%",1)])])])]}),_:1}),e(g,{class:"quick-actions-card",shadow:"hover"},{header:a(()=>[...t[32]||(t[32]=[s("span",{class:"card-title"},"快速入口",-1)])]),default:a(()=>[s("div",zt,[s("div",{class:"action-item",onClick:t[1]||(t[1]=n=>r.$router.push("/poems"))},[e(c,null,{default:a(()=>[e(l(D))]),_:1}),t[33]||(t[33]=s("span",null,"诗词解析",-1))]),s("div",{class:"action-item",onClick:t[2]||(t[2]=n=>r.$router.push("/library"))},[e(c,null,{default:a(()=>[e(l(T))]),_:1}),t[34]||(t[34]=s("span",null,"诗词库",-1))]),s("div",{class:"action-item",onClick:es},[e(c,null,{default:a(()=>[e(l(J))]),_:1}),t[35]||(t[35]=s("span",null,"学习路径",-1))]),s("div",{class:"action-item",onClick:as},[e(c,null,{default:a(()=>[e(l(O))]),_:1}),t[36]||(t[36]=s("span",null,"成就",-1))])])]),_:1}),A.value?(_(),C(g,{key:0,class:"ai-reminder-card",shadow:"hover"},{header:a(()=>[s("div",St,[t[37]||(t[37]=s("span",{class:"card-title"},"AI提醒",-1)),e(c,null,{default:a(()=>[e(l(Q))]),_:1})])]),default:a(()=>[s("div",Dt,[s("p",null,i(A.value.message),1),s("div",Tt,[e(h,{type:"primary",size:"small",onClick:ls},{default:a(()=>[p(i(A.value.actionText),1)]),_:1}),e(h,{size:"small",onClick:ns},{default:a(()=>[...t[38]||(t[38]=[p("稍后",-1)])]),_:1})])])]),_:1})):F("",!0)])]),_:1})]),_:1})]),_:1}))])}}});const Vt=Ps(Pt,[["__scopeId","data-v-6d325a09"]]);export{Vt as default};
