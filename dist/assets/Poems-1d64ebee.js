import{_ as U,s as K}from"./index-a3a8f004.js";import{a1 as d,R as I,ak as X,al as Y,ah as N,am as Z,an as ee,Q as te,W as A,ao as se,ap as ae,T as le,aq as oe}from"./element-plus-f60a088f.js";/* empty css               *//* empty css                  */import{j as F,r as h,c as C,b as ne,l as u,t as a,J as e,C as c,F as V,$,A as P,ae as ce,k as n,u as x,U as w,B as ie,E as M,e as ue}from"./vendor-3a970c2f.js";import{g as L}from"./mockData-70ed22ed.js";import"./supabase-43a56c42.js";const re={class:"poem-list"},de={class:"list-header"},_e={class:"list-title"},pe={class:"list-actions"},me={class:"poem-grid"},ve=["onClick"],fe={class:"poem-header"},he={class:"poem-title"},ge={class:"poem-meta"},ye={class:"poem-author"},ke={class:"poem-dynasty"},be={class:"poem-content"},Ce={key:0,class:"poem-more"},Pe={class:"poem-tags"},we={key:0,class:"tag-more"},xe={class:"poem-stats"},Ee={class:"stat"},Ve={class:"stat"},$e={class:"poem-actions"},Le={key:0,class:"empty-state"},ze={key:1,class:"pagination"},Be=F({__name:"PoemList",props:{poems:{},title:{default:"诗词列表"},showActions:{type:Boolean,default:!0}},setup(E){const p=E,y=ce(),o=h(""),i=h(""),m=h(""),v=h(1),k=h(12),b=C(()=>{let l=p.poems;if(o.value){const t=o.value.toLowerCase();l=l.filter(_=>_.title.toLowerCase().includes(t)||_.author.toLowerCase().includes(t)||_.content.some(g=>g.toLowerCase().includes(t))||_.tags.some(g=>g.toLowerCase().includes(t)))}return i.value&&(l=l.filter(t=>t.dynasty===i.value)),m.value&&(l=l.filter(t=>t.difficulty===m.value)),l}),z=C(()=>b.value.length),S=C(()=>Math.ceil(z.value/k.value));C(()=>{const l=(v.value-1)*k.value,t=l+k.value;return b.value.slice(l,t)});const j=l=>({easy:"success",medium:"warning",hard:"danger"})[l]||"info",q=l=>({easy:"简单",medium:"中等",hard:"困难"})[l]||"未知",Q=l=>{y.push(`/poems/${l.id}`)},R=l=>{y.push(`/analysis/${l.id}`)},J=l=>{te.success(`已收藏《${l.title}》`)},O=l=>{v.value=l};return ne([o,i,m],()=>{v.value=1}),(l,t)=>{const _=A,g=I,r=se,B=X,T=ae,D=le,W=oe,G=Y;return n(),u("div",re,[a("div",de,[a("h2",_e,d(E.title),1),a("div",pe,[e(g,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),placeholder:"搜索诗词...",style:{width:"200px"},clearable:""},{prefix:c(()=>[e(_,null,{default:c(()=>[e(x(N))]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),placeholder:"选择朝代",clearable:""},{default:c(()=>[e(r,{label:"全部",value:""}),e(r,{label:"唐代",value:"唐代"}),e(r,{label:"宋代",value:"宋代"}),e(r,{label:"元代",value:"元代"}),e(r,{label:"明代",value:"明代"}),e(r,{label:"清代",value:"清代"})]),_:1},8,["modelValue"]),e(B,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),placeholder:"选择难度",clearable:""},{default:c(()=>[e(r,{label:"全部",value:""}),e(r,{label:"简单",value:"easy"}),e(r,{label:"中等",value:"medium"}),e(r,{label:"困难",value:"hard"})]),_:1},8,["modelValue"])])]),a("div",me,[(n(!0),u(V,null,$(b.value,s=>(n(),u("div",{key:s.id,class:"poem-card",onClick:f=>Q(s)},[a("div",fe,[a("h3",he,d(s.title),1),e(T,{type:j(s.difficulty),size:"small"},{default:c(()=>[w(d(q(s.difficulty)),1)]),_:2},1032,["type"])]),a("div",ge,[a("span",ye,d(s.author),1),a("span",ke,d(s.dynasty),1)]),a("div",be,[(n(!0),u(V,null,$(s.content.slice(0,2),(f,H)=>(n(),u("p",{key:H,class:"poem-line"},d(f),1))),128)),s.content.length>2?(n(),u("p",Ce,"...")):P("",!0)]),a("div",Pe,[(n(!0),u(V,null,$(s.tags.slice(0,3),f=>(n(),ie(T,{key:f,size:"small",type:"info"},{default:c(()=>[w(d(f),1)]),_:2},1024))),128)),s.tags.length>3?(n(),u("span",we," +"+d(s.tags.length-3),1)):P("",!0)]),a("div",xe,[a("div",Ee,[e(_,null,{default:c(()=>[e(x(Z))]),_:1}),a("span",null,d(s.views||0),1)]),a("div",Ve,[e(_,null,{default:c(()=>[e(x(ee))]),_:1}),a("span",null,d(s.likes||0),1)])]),a("div",$e,[e(D,{type:"primary",size:"small",onClick:M(f=>R(s),["stop"])},{default:c(()=>[...t[4]||(t[4]=[w(" 开始解析 ",-1)])]),_:1},8,["onClick"]),e(D,{size:"small",onClick:M(f=>J(s),["stop"])},{default:c(()=>[...t[5]||(t[5]=[w(" 收藏 ",-1)])]),_:1},8,["onClick"])])],8,ve))),128))]),b.value.length===0?(n(),u("div",Le,[e(W,{description:"暂无诗词数据"})])):P("",!0),S.value>1?(n(),u("div",ze,[e(G,{"current-page":v.value,"onUpdate:currentPage":t[3]||(t[3]=s=>v.value=s),"page-size":k.value,total:z.value,layout:"prev, pager, next, jumper",onCurrentChange:O},null,8,["current-page","page-size","total"])])):P("",!0)])}}});const Te=U(Be,[["__scopeId","data-v-761b2dc4"]]),De={class:"poems-page"},Me={class:"main-content"},Ue={class:"search-section"},Ie={class:"poems-section"},Ne=F({__name:"Poems",setup(E){const p=h([]);ue(async()=>{await y()});const y=async()=>{try{const{data:o,error:i}=await K.from("poems").select("*").order("created_at",{ascending:!1});i?(console.error("加载诗词数据失败:",i),p.value=L()):o&&o.length>0?p.value=o:p.value=L()}catch(o){console.error("加载诗词数据异常:",o),p.value=L()}};return(o,i)=>{const m=A,v=I;return n(),u("div",De,[i[0]||(i[0]=a("div",{class:"page-header"},[a("div",{class:"header-content"},[a("h1",{class:"page-title"},"诗词库"),a("p",{class:"page-subtitle"},"探索经典诗词，感受中华文化魅力")])],-1)),a("div",Me,[a("div",Ue,[e(v,{placeholder:"搜索诗词标题、作者或内容...",size:"large",clearable:"",class:"search-input"},{prefix:c(()=>[e(m,null,{default:c(()=>[e(x(N))]),_:1})]),_:1})]),a("div",Ie,[e(Te,{poems:p.value,title:"全部诗词"},null,8,["poems"])])])])}}});const Je=U(Ne,[["__scopeId","data-v-3230e76a"]]);export{Je as default};
