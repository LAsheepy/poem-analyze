import{d as ss,u as ts,r as u,o as m,c as $,a as e,w as a,b as s,t as n,e as l,_ as es,f as ys,g,h as fs,i as gs,j as z,k as ks,l as Z,m as k,F,n as L,p as bs,q as $s,s as b,v as ws,x as Cs,y as As,z as Is,A as xs,B as Ms,C as Ss,D as zs,E as Ts}from"./main-3abf4ed4.js";const Ps={class:"progress-chart"},Ds={class:"chart-container"},Rs={class:"chart-row"},Vs={class:"chart-item"},Bs={class:"chart-value"},Ns={class:"chart-item"},Us={class:"chart-value"},qs={class:"chart-row"},Es={class:"chart-item"},Fs={class:"chart-value"},Ls={class:"chart-item"},Ks={class:"chart-value"},js={class:"stats-grid"},Hs={class:"stat-item"},Gs={class:"stat-number"},Js={class:"stat-item"},Os={class:"stat-number"},Qs={class:"stat-item"},Ws={class:"stat-number"},Xs={class:"stat-item"},Ys={class:"stat-number"},Zs=ss({__name:"ProgressChart",setup(as){const d=ts(),i=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],A=h=>{const o=Math.floor(h/60),c=h%60;return o>0?`${o}小时${c}分钟`:`${c}分钟`},q=()=>{var c;const h=((c=d.user)==null?void 0:c.weekly_study_time)||0;return Math.min(h/600*100,100)},T=()=>{var c;const h=(c=d.user)==null?void 0:c.mastery_level;return{初级:25,中级:50,高级:75,专家:100}[h]||0};return(h,o)=>{const c=u("el-progress"),E=u("el-card");return m(),$("div",Ps,[e(E,{header:"学习进度"},{default:a(()=>{var P,D,R,V,y,w,B,N,f,U;return[s("div",Ds,[s("div",Rs,[s("div",Vs,[o[0]||(o[0]=s("div",{class:"chart-title"},"本周学习时间",-1)),s("div",Bs,n(A(((P=l(d).user)==null?void 0:P.weekly_study_time)||0)),1),e(c,{percentage:q(),"stroke-width":8,color:i},null,8,["percentage"])]),s("div",Ns,[o[1]||(o[1]=s("div",{class:"chart-title"},"诗词掌握度",-1)),s("div",Us,n(((D=l(d).user)==null?void 0:D.mastery_level)||"初级"),1),e(c,{percentage:T(),"stroke-width":8,color:i,status:"success"},null,8,["percentage"])])]),s("div",qs,[s("div",Es,[o[2]||(o[2]=s("div",{class:"chart-title"},"连续学习天数",-1)),s("div",Fs,n(((R=l(d).user)==null?void 0:R.streak_days)||0)+" 天",1),e(c,{percentage:Math.min((((V=l(d).user)==null?void 0:V.streak_days)||0)*10,100),"stroke-width":8,color:i},null,8,["percentage"])]),s("div",Ls,[o[3]||(o[3]=s("div",{class:"chart-title"},"完成率",-1)),s("div",Ks,n(((y=l(d).user)==null?void 0:y.completion_rate)||0)+"%",1),e(c,{percentage:((w=l(d).user)==null?void 0:w.completion_rate)||0,"stroke-width":8,color:i},null,8,["percentage"])])])]),s("div",js,[s("div",Hs,[s("div",Gs,n(((B=l(d).user)==null?void 0:B.analyzed_poems)||0),1),o[4]||(o[4]=s("div",{class:"stat-label"},"已解析诗词",-1))]),s("div",Js,[s("div",Os,n(((N=l(d).user)==null?void 0:N.weekly_activity)||0),1),o[5]||(o[5]=s("div",{class:"stat-label"},"本周活跃度",-1))]),s("div",Qs,[s("div",Ws,n(((f=l(d).user)==null?void 0:f.average_score)||0),1),o[6]||(o[6]=s("div",{class:"stat-label"},"平均得分",-1))]),s("div",Xs,[s("div",Ys,n(((U=l(d).user)==null?void 0:U.learning_progress)||0)+"%",1),o[7]||(o[7]=s("div",{class:"stat-label"},"学习进度",-1))])])]}),_:1})])}}});const st=es(Zs,[["__scopeId","data-v-bd763559"]]),tt={class:"dashboard"},et={key:0,class:"loading-container"},at={class:"header-content"},lt={class:"welcome-title"},ot={class:"header-stats"},nt={class:"stat-badge"},it={class:"stat-value"},rt={class:"stat-badge"},dt={class:"stat-value"},ct={class:"user-info"},ut={class:"username"},_t={class:"dashboard-grid"},mt={class:"card-header"},vt={class:"ai-content"},pt={class:"ai-avatar"},ht={class:"ai-message"},yt={class:"ai-features"},ft={class:"chat-input"},gt={class:"card-header"},kt={class:"recommendation-list"},bt=["onClick"],$t={class:"poem-info"},wt={class:"poem-title"},Ct={class:"poem-meta"},At={class:"poem-tags"},It={class:"poem-action"},xt={class:"stats-content"},Mt={class:"stat-chart"},St={class:"chart-item"},zt={class:"chart-item"},Tt={class:"chart-item"},Pt={class:"chart-item"},Dt={class:"chart-item"},Rt={class:"chart-item"},Vt={class:"chart-item"},Bt={class:"stats-summary"},Nt={class:"summary-item"},Ut={class:"summary-value"},qt={class:"summary-item"},Et={class:"summary-value"},Ft={class:"quick-actions"},Lt={class:"card-header"},Kt={class:"reminder-content"},jt={class:"reminder-actions"},Ht=ss({__name:"Dashboard",setup(as){const d=ks(),i=ts(),A=ys(),q=ws,T=Cs,h=As,o=Is,c=xs,E=Ms,P=Ss,D=zs,R=Ts,V=g("dashboard"),y=g(""),w=g(!0),B=g(2),N=g(["个性化解析","进度跟踪","智能推荐","即时答疑"]),f=g({message:"您有2首诗词待解析，建议今天完成学习任务。",actionText:"开始学习"}),U=g([{id:"1",title:"静夜思",author:"李白",dynasty:"唐代",tags:["思乡","月亮"]},{id:"2",title:"春晓",author:"孟浩然",dynasty:"唐代",tags:["春天","自然"]},{id:"3",title:"登鹳雀楼",author:"王之涣",dynasty:"唐代",tags:["登高","哲理"]}]),ls=()=>{console.log("刷新推荐")},K=_=>{d.push(`/analysis/${_}`)},os=()=>{console.log("查看学习路径")},ns=()=>{console.log("查看成就")},is=()=>{d.push("/poems")},rs=()=>{f.value=null},ds=_=>{d.push(`/${_}`)},cs=()=>{A.createConversation()},j=async()=>{if(y.value.trim())try{await A.sendMessage(y.value),y.value=""}catch(_){console.error("发送消息失败:",_)}};return fs(async()=>{try{await i.loadUser()?await A.loadConversations():console.log("用户未登录，显示登录界面"),await new Promise(t=>setTimeout(t,100)),w.value=!1}catch(_){console.error("Dashboard初始化失败:",_),w.value=!1}}),gs(_=>(console.error("Dashboard组件错误:",_),!1)),(_,t)=>{const us=u("el-skeleton"),v=u("el-icon"),I=u("el-menu-item"),_s=u("el-menu"),ms=u("el-aside"),H=u("el-avatar"),vs=u("el-header"),C=u("el-button"),G=u("el-tag"),ps=u("el-input"),x=u("el-card"),hs=u("el-main"),J=u("el-container");return m(),$("div",tt,[w.value?(m(),$("div",et,[e(us,{rows:10,animated:""})])):(m(),z(J,{key:1,class:"dashboard-container"},{default:a(()=>[e(ms,{width:"280px",class:"sidebar"},{default:a(()=>[t[8]||(t[8]=s("div",{class:"logo"},[s("h2",{class:"logo-title"},"诗韵星"),s("p",{class:"logo-subtitle"},"AI驱动诗词解析平台")],-1)),e(_s,{"default-active":V.value,class:"sidebar-menu",onSelect:ds},{default:a(()=>[e(I,{index:"dashboard",class:"menu-item"},{default:a(()=>[e(v,null,{default:a(()=>[e(l(q))]),_:1}),t[3]||(t[3]=s("span",null,"工作台",-1))]),_:1}),e(I,{index:"poems",class:"menu-item"},{default:a(()=>[e(v,null,{default:a(()=>[e(l(T))]),_:1}),t[4]||(t[4]=s("span",null,"诗词解析",-1))]),_:1}),e(I,{index:"library",class:"menu-item"},{default:a(()=>[e(v,null,{default:a(()=>[e(l(c))]),_:1}),t[5]||(t[5]=s("span",null,"诗词库",-1))]),_:1}),e(I,{index:"recommendations",class:"menu-item"},{default:a(()=>[e(v,null,{default:a(()=>[e(l(E))]),_:1}),t[6]||(t[6]=s("span",null,"今日推荐",-1))]),_:1}),l(i).isTeacher?(m(),z(I,{key:0,index:"teacher",class:"menu-item"},{default:a(()=>[e(v,null,{default:a(()=>[e(l(h))]),_:1}),t[7]||(t[7]=s("span",null,"教学管理",-1))]),_:1})):Z("",!0)]),_:1},8,["default-active"])]),_:1}),e(J,null,{default:a(()=>[e(vs,{class:"header"},{default:a(()=>{var r,p,M,S;return[s("div",at,[s("h1",lt,"欢迎回来，"+n((r=l(i).user)==null?void 0:r.username)+"！",1),s("div",ot,[s("div",nt,[t[9]||(t[9]=s("span",{class:"stat-label"},"连续学习",-1)),s("span",it,n(((p=l(i).user)==null?void 0:p.streakDays)||0)+"天",1)]),s("div",rt,[t[10]||(t[10]=s("span",{class:"stat-label"},"今日任务",-1)),s("span",dt,n(B.value)+"/3",1)])]),s("div",ct,[e(H,{size:40,src:(M=l(i).user)==null?void 0:M.avatar},null,8,["src"]),s("span",ut,n((S=l(i).user)==null?void 0:S.username),1)])])]}),_:1}),e(hs,{class:"main-content"},{default:a(()=>[s("div",_t,[e(st),e(x,{class:"ai-card",shadow:"hover"},{header:a(()=>[s("div",mt,[t[12]||(t[12]=s("span",{class:"card-title"},"AI诗词导师",-1)),e(C,{type:"primary",size:"small",onClick:cs},{default:a(()=>[...t[11]||(t[11]=[k(" 开始对话 ",-1)])]),_:1})])]),default:a(()=>[s("div",vt,[s("div",pt,[e(H,{size:60,src:"/api/placeholder/60/60"})]),s("div",ht,[t[13]||(t[13]=s("p",null,"您好！我是您的专属AI诗词导师，随时为您提供个性化解析和指导。",-1)),s("div",yt,[(m(!0),$(F,null,L(N.value,r=>(m(),z(G,{key:r,size:"small"},{default:a(()=>[k(n(r),1)]),_:2},1024))),128))])])]),s("div",ft,[e(ps,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=r=>y.value=r),placeholder:"输入您的问题...",onKeyup:bs(j,["enter"])},{append:a(()=>[e(C,{onClick:j},{default:a(()=>[e(v,null,{default:a(()=>[e(l(o))]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(x,{class:"recommendation-card",shadow:"hover"},{header:a(()=>[s("div",gt,[t[15]||(t[15]=s("span",{class:"card-title"},"今日推荐",-1)),e(C,{type:"text",onClick:ls},{default:a(()=>[...t[14]||(t[14]=[k("换一批",-1)])]),_:1})])]),default:a(()=>[s("div",kt,[(m(!0),$(F,null,L(U.value,r=>(m(),$("div",{key:r.id,class:"poem-item",onClick:p=>K(r.id)},[s("div",$t,[s("h4",wt,n(r.title),1),s("p",Ct,n(r.author)+" · "+n(r.dynasty),1),s("div",At,[(m(!0),$(F,null,L(r.tags,p=>(m(),z(G,{key:p,size:"small",type:"info"},{default:a(()=>[k(n(p),1)]),_:2},1024))),128))])]),s("div",It,[e(C,{type:"primary",size:"small",onClick:$s(p=>K(r.id),["stop"])},{default:a(()=>[...t[16]||(t[16]=[k(" 开始解析 ",-1)])]),_:1},8,["onClick"])])],8,bt))),128))])]),_:1}),e(x,{class:"stats-card",shadow:"hover"},{header:a(()=>[...t[17]||(t[17]=[s("span",{class:"card-title"},"学习统计",-1)])]),default:a(()=>{var r,p,M,S,O,Q,W,X,Y;return[s("div",xt,[s("div",Mt,[s("div",St,[s("div",{class:"chart-bar",style:b({height:`${((r=l(i).user)==null?void 0:r.weeklyActivity)||0}%`})},null,4),t[18]||(t[18]=s("span",null,"一",-1))]),s("div",zt,[s("div",{class:"chart-bar",style:b({height:`${(((p=l(i).user)==null?void 0:p.weeklyActivity)||0)+20}%`})},null,4),t[19]||(t[19]=s("span",null,"二",-1))]),s("div",Tt,[s("div",{class:"chart-bar",style:b({height:`${(((M=l(i).user)==null?void 0:M.weeklyActivity)||0)+40}%`})},null,4),t[20]||(t[20]=s("span",null,"三",-1))]),s("div",Pt,[s("div",{class:"chart-bar",style:b({height:`${(((S=l(i).user)==null?void 0:S.weeklyActivity)||0)+60}%`})},null,4),t[21]||(t[21]=s("span",null,"四",-1))]),s("div",Dt,[s("div",{class:"chart-bar",style:b({height:`${(((O=l(i).user)==null?void 0:O.weeklyActivity)||0)+80}%`})},null,4),t[22]||(t[22]=s("span",null,"五",-1))]),s("div",Rt,[s("div",{class:"chart-bar",style:b({height:`${(((Q=l(i).user)==null?void 0:Q.weeklyActivity)||0)+100}%`})},null,4),t[23]||(t[23]=s("span",null,"六",-1))]),s("div",Vt,[s("div",{class:"chart-bar",style:b({height:`${(((W=l(i).user)==null?void 0:W.weeklyActivity)||0)+60}%`})},null,4),t[24]||(t[24]=s("span",null,"日",-1))])]),s("div",Bt,[s("div",Nt,[t[25]||(t[25]=s("span",{class:"summary-label"},"本周学习",-1)),s("span",Ut,n(((X=l(i).user)==null?void 0:X.weeklyStudyTime)||0)+"小时",1)]),s("div",qt,[t[26]||(t[26]=s("span",{class:"summary-label"},"完成率",-1)),s("span",Et,n(((Y=l(i).user)==null?void 0:Y.completionRate)||0)+"%",1)])])])]}),_:1}),e(x,{class:"quick-actions-card",shadow:"hover"},{header:a(()=>[...t[27]||(t[27]=[s("span",{class:"card-title"},"快速入口",-1)])]),default:a(()=>[s("div",Ft,[s("div",{class:"action-item",onClick:t[1]||(t[1]=r=>_.$router.push("/poems"))},[e(v,null,{default:a(()=>[e(l(T))]),_:1}),t[28]||(t[28]=s("span",null,"诗词解析",-1))]),s("div",{class:"action-item",onClick:t[2]||(t[2]=r=>_.$router.push("/library"))},[e(v,null,{default:a(()=>[e(l(c))]),_:1}),t[29]||(t[29]=s("span",null,"诗词库",-1))]),s("div",{class:"action-item",onClick:os},[e(v,null,{default:a(()=>[e(l(P))]),_:1}),t[30]||(t[30]=s("span",null,"学习路径",-1))]),s("div",{class:"action-item",onClick:ns},[e(v,null,{default:a(()=>[e(l(D))]),_:1}),t[31]||(t[31]=s("span",null,"成就",-1))])])]),_:1}),f.value?(m(),z(x,{key:0,class:"ai-reminder-card",shadow:"hover"},{header:a(()=>[s("div",Lt,[t[32]||(t[32]=s("span",{class:"card-title"},"AI提醒",-1)),e(v,null,{default:a(()=>[e(l(R))]),_:1})])]),default:a(()=>[s("div",Kt,[s("p",null,n(f.value.message),1),s("div",jt,[e(C,{type:"primary",size:"small",onClick:is},{default:a(()=>[k(n(f.value.actionText),1)]),_:1}),e(C,{size:"small",onClick:rs},{default:a(()=>[...t[33]||(t[33]=[k("稍后",-1)])]),_:1})])])]),_:1})):Z("",!0)])]),_:1})]),_:1})]),_:1}))])}}});const Jt=es(Ht,[["__scopeId","data-v-094f34b0"]]);export{Jt as default};
