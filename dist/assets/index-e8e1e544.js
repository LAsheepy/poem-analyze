import{by as Q,r as y,c as N,q as B,a4 as H,y as X,O as T,P as s,C as k,E as w,W as r,a2 as Y,T as v,bz as ee,z as te,$ as pe,aX as re,D as z,u as A,U as K,S as M,bA as me,bB as fe,bv as _e,bC as ge}from"./vendor-0fc5911b.js";import{E as ve,a as P,b as he,c as we,d as ae,e as ye,f as be,g as oe,h as Ee,i as Ae,j as Ie,r as Ce,u as F,s as Z,k as Ve,l as Ue,n as ke,m as Pe,o as Se,p as Le,q as Oe,t as Re,v as Te,w as De,x as xe}from"./element-plus-7b99588a.js";import{a as Me,_ as V}from"./supabase-043902eb.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const p of i)if(p.type==="childList")for(const _ of p.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function a(i){const p={};return i.integrity&&(p.integrity=i.integrity),i.referrerPolicy&&(p.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?p.credentials="include":i.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(i){if(i.ep)return;i.ep=!0;const p=a(i);fetch(i.href,p)}})();const se="https://rnvpihtnbtltaulxsunc.supabase.co",ze="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJudnBpaHRuYnRsdGF1bHhzdW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA1MTE0OTcsImV4cCI6MjA3NjA4NzQ5N30.URaYNJGKCMz1Lkfnhf7c0f8XR0Ip1t3aYIy41pAo08k",c=Me(se,ze,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});se.includes("demo.supabase.co")&&console.warn("⚠️ 使用演示Supabase配置，请配置真实环境变量");const Ne=Object.freeze(Object.defineProperty({__proto__:null,supabase:c},Symbol.toStringTag,{value:"Module"})),$={async getCurrentUser(){const{data:{user:n}}=await c.auth.getUser();if(!n)return null;const{data:o,error:a}=await c.from("profiles").select("*").eq("id",n.id).single();if(a)throw a;return o},async upsertUser(n){const{data:{user:o}}=await c.auth.getUser();if(!o)throw new Error("用户未登录");const{data:a,error:l}=await c.from("profiles").upsert({id:o.id,...n,updated_at:new Date().toISOString()}).select().single();if(l)throw l;return a},async updateLearningProgress(n){const{data:{user:o}}=await c.auth.getUser();if(!o)throw new Error("用户未登录");const{data:a,error:l}=await c.from("profiles").update({learning_progress:n,updated_at:new Date().toISOString()}).eq("id",o.id).select().single();if(l)throw l;return a}},R={async getConversations(){const{data:{user:n}}=await c.auth.getUser();if(!n)throw new Error("用户未登录");const{data:o,error:a}=await c.from("ai_conversations").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(a)throw a;return o||[]},async createConversation(n){const{data:{user:o}}=await c.auth.getUser();if(!o)throw new Error("用户未登录");const{data:a,error:l}=await c.from("ai_conversations").insert({user_id:o.id,poem_id:n||null,title:"新对话"}).select().single();if(l)throw l;return a},async getMessages(n){const{data:o,error:a}=await c.from("ai_messages").select("*").eq("conversation_id",n).order("created_at",{ascending:!0});if(a)throw a;return o||[]},async sendMessage(n,o,a="user"){const{data:l,error:i}=await c.from("ai_messages").insert({conversation_id:n,role:a,content:o}).select().single();if(i)throw i;return await c.from("ai_conversations").update({updated_at:new Date().toISOString()}).eq("id",n),l}},qe=Q("user",()=>{const n=y(null),o=y(!1),a=y(null),l=N(()=>n.value!==null),i=N(()=>{var e;return((e=n.value)==null?void 0:e.role)==="teacher"}),p=async()=>{o.value=!0,a.value=null;try{const e=await $.getCurrentUser();return n.value=e,e}catch(e){return a.value=e instanceof Error?e.message:"加载用户信息失败",console.error("加载用户信息失败:",e),null}finally{o.value=!1}},_=async e=>{o.value=!0,a.value=null;try{const t=await $.upsertUser(e);return n.value=t,t}catch(t){throw a.value=t instanceof Error?t.message:"保存用户信息失败",console.error("保存用户信息失败:",t),t}finally{o.value=!1}},b=()=>{n.value=null,a.value=null};return{user:n,isLoading:o,error:a,isAuthenticated:l,isTeacher:i,loadUser:p,upsertUser:_,clearUser:b,updateLearningProgress:async e=>{if(n.value)try{await $.updateLearningProgress(e),n.value.learningProgress=e}catch(t){throw a.value=t instanceof Error?t.message:"更新学习进度失败",console.error("更新学习进度失败:",t),t}},setupAuthListener:()=>{c.auth.onAuthStateChange(async(e,t)=>{e==="SIGNED_IN"&&(t!=null&&t.user)?await p():e==="SIGNED_OUT"&&b()})}}}),Ge=Q("ai",()=>{const n=y([]),o=y(!1),a=y(void 0),l=y(null),i=N(()=>n.value.find(e=>e.id===a.value)),p=async()=>{o.value=!0,l.value=null;try{const e=await R.getConversations();return n.value=e,e}catch(e){return l.value=e instanceof Error?e.message:"加载对话列表失败",console.error("加载对话列表失败:",e),[]}finally{o.value=!1}},_=async(e,t)=>{a.value||await b(t),o.value=!0,l.value=null;try{await R.sendMessage(a.value,e,"user");const d=`这是AI对"${e}"的响应。基于诗词解析功能，我可以为您提供：

1. 字词解析和注释
2. 意象分析和意境解读
3. 作者生平和创作背景
4. 艺术特色和情感表达

请告诉我您想了解的具体内容。`;await R.sendMessage(a.value,d,"assistant");const E={id:Date.now().toString(),content:d,timestamp:new Date,poemId:t||null};return await m(a.value),E}catch(d){throw l.value=d instanceof Error?d.message:"发送消息失败",console.error("发送消息失败:",d),d}finally{o.value=!1}},b=async e=>{o.value=!0,l.value=null;try{const t=await R.createConversation(e);return n.value.unshift(t),a.value=t.id,await m(t.id),t.id}catch(t){throw l.value=t instanceof Error?t.message:"创建对话失败",console.error("创建对话失败:",t),t}finally{o.value=!1}},m=async e=>{try{const t=await R.getMessages(e),d=n.value.findIndex(E=>E.id===e);d!==-1&&(n.value[d].messages=t.map(E=>({id:E.id,role:E.role,content:E.content,timestamp:new Date(E.created_at)})))}catch(t){console.error("加载对话消息失败:",t)}};return{conversations:n,isLoading:o,currentConversationId:a,currentConversation:i,error:l,loadConversations:p,sendMessage:_,createConversation:b,setCurrentConversation:e=>{a.value=e,m(e)},loadConversationMessages:m}});function Fe(){const n=qe(),o=Ge(),a=N(()=>n.isAuthenticated&&!n.isLoading),l=async()=>{try{return n.setupAuthListener(),await n.loadUser()?(await o.loadConversations(),console.log("应用初始化成功，用户已登录")):console.log("应用初始化成功，用户未登录"),!0}catch(m){return console.error("应用初始化失败:",m),!1}},i=()=>{n.clearUser(),o.conversations=[],o.currentConversationId=void 0};return{userStore:n,aiStore:o,isAppReady:a,initializeApp:l,resetApp:i,login:async(m,g)=>{try{const{data:e,error:t}=await c.auth.signInWithPassword({email:m,password:g});if(t)throw t;return e}catch(e){throw console.error("登录失败:",e),e}},register:async(m,g,e)=>{try{const{data:t,error:d}=await c.auth.signUp({email:m,password:g,options:{data:{username:e}}});if(d)throw d;return t}catch(t){throw console.error("注册失败:",t),t}},logout:async()=>{try{const{error:m}=await c.auth.signOut();if(m)throw m;i()}catch(m){throw console.error("登出失败:",m),m}}}}const $e={class:"auth-modal-content"},Be={class:"auth-divider"},Je={class:"social-auth"},We=B({__name:"AuthModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","auth-success"],setup(n,{emit:o}){const a=n,l=o,i=y(!1),p=y("login"),_=y(!1),b=y(),m=y(),g=H({email:"",password:""}),e=H({username:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),t={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},E={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(f,u,C)=>{u===""?C(new Error("请确认密码")):u!==e.password?C(new Error("两次输入密码不一致")):C()},trigger:"blur"}]};X(()=>a.modelValue,f=>{i.value=f}),X(i,f=>{l("update:modelValue",f),f||I()});const G=()=>{i.value=!1},I=()=>{g.email="",g.password="",e.username="",e.email="",e.password="",e.confirmPassword="",e.agreeTerms=!1},S=async()=>{if(b.value)try{await b.value.validate(),_.value=!0;const{data:f,error:u}=await c.auth.signInWithPassword({email:g.email,password:g.password});if(u)throw u;f.user&&(P.success("登录成功"),l("auth-success"),i.value=!1)}catch(f){console.error("登录失败:",f),P.error(f.message||"登录失败，请检查邮箱和密码")}finally{_.value=!1}},L=async()=>{if(m.value)try{if(await m.value.validate(),!e.agreeTerms){P.warning("请同意服务条款和隐私政策");return}_.value=!0;const{data:f,error:u}=await c.auth.signUp({email:e.email,password:e.password,options:{data:{username:e.username}}});if(u)throw u;f.user&&(P.success("注册成功！请检查您的邮箱验证账户"),l("auth-success"),i.value=!1)}catch(f){console.error("注册失败:",f),P.error(f.message||"注册失败，请重试")}finally{_.value=!1}},O=async()=>{try{const{error:f}=await c.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(f)throw f}catch(f){console.error("GitHub登录失败:",f),P.error("GitHub登录失败")}},D=async()=>{try{const{error:f}=await c.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(f)throw f}catch(f){console.error("Google登录失败:",f),P.error("Google登录失败")}};return(f,u)=>{const C=he,U=we,x=ae,J=ye,ue=be,W=oe,j=Ee,ie=Ae,de=Ie,ce=ve;return k(),T(ce,{modelValue:i.value,"onUpdate:modelValue":u[8]||(u[8]=h=>i.value=h),title:"用户认证",width:"400px","before-close":G,"align-center":""},{default:s(()=>[w("div",$e,[r(de,{modelValue:p.value,"onUpdate:modelValue":u[7]||(u[7]=h=>p.value=h),class:"auth-tabs"},{default:s(()=>[r(j,{label:"登录",name:"login"},{default:s(()=>[r(J,{model:g,rules:t,ref_key:"loginFormRef",ref:b,class:"auth-form",onSubmit:Y(S,["prevent"])},{default:s(()=>[r(U,{prop:"email"},{default:s(()=>[r(C,{modelValue:g.email,"onUpdate:modelValue":u[0]||(u[0]=h=>g.email=h),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),r(U,{prop:"password"},{default:s(()=>[r(C,{modelValue:g.password,"onUpdate:modelValue":u[1]||(u[1]=h=>g.password=h),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(U,null,{default:s(()=>[r(x,{type:"primary",size:"large",loading:_.value,onClick:S,class:"auth-button"},{default:s(()=>[...u[9]||(u[9]=[v(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),w("div",Be,[r(ue,null,{default:s(()=>[...u[10]||(u[10]=[v("或",-1)])]),_:1})]),w("div",Je,[r(x,{class:"social-button github",onClick:O},{default:s(()=>[r(W,null,{default:s(()=>[...u[11]||(u[11]=[w("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[w("path",{fill:"currentColor",d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0 8.1 0 16.3 1.9 24.1 0 0 0 0 0 0C831.1 885 956.4 718.9 956.4 523.5 956.4 276.4 756.1 76.3 511.6 76.3z"})],-1)])]),_:1}),u[12]||(u[12]=v(" GitHub登录 ",-1))]),_:1}),r(x,{class:"social-button google",onClick:D},{default:s(()=>[r(W,null,{default:s(()=>[...u[13]||(u[13]=[w("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[w("path",{fill:"currentColor",d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1C757.6 109.4 649.4 60 522.2 60 294.1 60 109.4 244.7 109.4 472.8c0 228.1 184.7 412.8 412.8 412.8 228.1 0 412.8-184.7 412.8-412.8 0-11.4-.5-22.7-1.5-34z"})],-1)])]),_:1}),u[14]||(u[14]=v(" Google登录 ",-1))]),_:1})])]),_:1}),r(j,{label:"注册",name:"register"},{default:s(()=>[r(J,{model:e,rules:E,ref_key:"registerFormRef",ref:m,class:"auth-form",onSubmit:Y(L,["prevent"])},{default:s(()=>[r(U,{prop:"username"},{default:s(()=>[r(C,{modelValue:e.username,"onUpdate:modelValue":u[2]||(u[2]=h=>e.username=h),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),r(U,{prop:"email"},{default:s(()=>[r(C,{modelValue:e.email,"onUpdate:modelValue":u[3]||(u[3]=h=>e.email=h),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),r(U,{prop:"password"},{default:s(()=>[r(C,{modelValue:e.password,"onUpdate:modelValue":u[4]||(u[4]=h=>e.password=h),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(U,{prop:"confirmPassword"},{default:s(()=>[r(C,{modelValue:e.confirmPassword,"onUpdate:modelValue":u[5]||(u[5]=h=>e.confirmPassword=h),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(U,null,{default:s(()=>[r(ie,{modelValue:e.agreeTerms,"onUpdate:modelValue":u[6]||(u[6]=h=>e.agreeTerms=h)},{default:s(()=>[...u[15]||(u[15]=[v(" 我已阅读并同意服务条款和隐私政策 ",-1)])]),_:1},8,["modelValue"])]),_:1}),r(U,null,{default:s(()=>[r(x,{type:"primary",size:"large",loading:_.value,disabled:!e.agreeTerms,onClick:L,class:"auth-button"},{default:s(()=>[...u[16]||(u[16]=[v(" 注册 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])}}});const ne=(n,o)=>{const a=n.__vccOpts||n;for(const[l,i]of o)a[l]=i;return a},je=ne(We,[["__scopeId","data-v-6e020a66"]]),He={class:"navbar"},Xe={class:"navbar-container"},Ye={class:"navbar-brand"},Ke={class:"brand-logo"},Ze={key:0,class:"desktop-user-menu"},Qe={class:"user-dropdown"},et={class:"user-name"},tt={key:1,class:"auth-buttons"},rt={class:"mobile-menu"},at=B({__name:"Navbar",setup(n){const o=ee();y("");const a=y(null);te(async()=>{await l(),i()}),pe(()=>{const{data:{subscription:e}}=c.auth.onAuthStateChange(()=>{});e==null||e.unsubscribe()});const l=async()=>{try{const{data:{user:e}}=await c.auth.getUser();if(e){const{data:t}=await c.from("profiles").select("*").eq("id",e.id).single();a.value={...e,...t}}else a.value=null}catch(e){console.error("检查认证状态失败:",e),a.value=null}},i=()=>{c.auth.onAuthStateChange(async(e,t)=>{console.log("认证状态变化:",e),e==="SIGNED_IN"&&(t!=null&&t.user)?await l():e==="SIGNED_OUT"&&(a.value=null)})},p=e=>{switch(e){case"profile":o.push("/profile");break;case"settings":o.push("/settings");break;case"logout":g();break}},_=e=>{switch(e){case"home":o.push("/");break;case"poems":o.push("/poems");break;case"chat":o.push("/chat");break;case"profile":o.push("/profile");break;case"settings":o.push("/settings");break;case"login":o.push("/login");break;case"register":o.push("/register");break;case"logout":g();break}},b=()=>{o.push("/login")},m=()=>{o.push("/register")},g=async()=>{try{const{error:e}=await c.auth.signOut();if(e)throw e;a.value=null,P.success("退出登录成功"),o.push("/")}catch(e){console.error("退出登录失败:",e),P.error("退出登录失败")}};return(e,t)=>{const d=oe,E=re("router-link"),G=Oe,I=Re,S=Te,L=De,O=ae;return k(),z("div",He,[w("div",Xe,[w("div",Ye,[r(E,{to:"/",class:"brand-link"},{default:s(()=>[w("div",Ke,[r(d,{size:"24",color:"#409eff"},{default:s(()=>[r(A(Ce))]),_:1})]),t[0]||(t[0]=w("span",{class:"brand-text"},"诗词分析平台",-1))]),_:1})]),a.value?(k(),z("div",Ze,[r(L,{onCommand:p},{dropdown:s(()=>[r(S,null,{default:s(()=>[r(I,{command:"profile"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(F))]),_:1}),t[1]||(t[1]=v(" 个人中心 ",-1))]),_:1}),r(I,{divided:"",command:"logout"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(Z))]),_:1}),t[2]||(t[2]=v(" 退出登录 ",-1))]),_:1})]),_:1})]),default:s(()=>[w("span",Qe,[r(G,{size:32,src:a.value.avatar_url,class:"user-avatar"},{default:s(()=>{var D;return[v(K(((D=a.value.username)==null?void 0:D.charAt(0))||"U"),1)]}),_:1},8,["src"]),w("span",et,K(a.value.username||"用户"),1),r(d,null,{default:s(()=>[r(A(Ve))]),_:1})])]),_:1})])):(k(),z("div",tt,[r(O,{type:"primary",text:"",onClick:b},{default:s(()=>[...t[3]||(t[3]=[v("登录",-1)])]),_:1}),r(O,{type:"primary",onClick:m},{default:s(()=>[...t[4]||(t[4]=[v("注册",-1)])]),_:1})])),w("div",rt,[r(L,{onCommand:_},{dropdown:s(()=>[r(S,null,{default:s(()=>[r(I,{command:"home"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(Ue))]),_:1}),t[5]||(t[5]=v(" 首页 ",-1))]),_:1}),r(I,{command:"poems"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(ke))]),_:1}),t[6]||(t[6]=v(" 诗词库 ",-1))]),_:1}),r(I,{command:"chat"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(Pe))]),_:1}),t[7]||(t[7]=v(" AI助手 ",-1))]),_:1}),a.value?(k(),T(I,{key:0,command:"profile"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(F))]),_:1}),t[8]||(t[8]=v(" 个人中心 ",-1))]),_:1})):M("",!0),a.value?M("",!0):(k(),T(I,{key:1,divided:"",command:"login"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(F))]),_:1}),t[9]||(t[9]=v(" 登录 ",-1))]),_:1})),a.value?M("",!0):(k(),T(I,{key:2,command:"register"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(Se))]),_:1}),t[10]||(t[10]=v(" 注册 ",-1))]),_:1})),a.value?(k(),T(I,{key:3,command:"logout"},{default:s(()=>[r(d,null,{default:s(()=>[r(A(Z))]),_:1}),t[11]||(t[11]=v(" 退出登录 ",-1))]),_:1})):M("",!0)]),_:1})]),default:s(()=>[r(O,{text:""},{default:s(()=>[r(d,null,{default:s(()=>[r(A(Le))]),_:1})]),_:1})]),_:1})])])])}}});const ot=ne(at,[["__scopeId","data-v-75b93bc7"]]),st={id:"app"},nt={class:"app-main"},lt=B({__name:"App",setup(n){const o=ee(),a=Fe(),l=y(!1),i=()=>{l.value=!1,o.go(0)};return te(async()=>{await a.initializeApp();const p=o.currentRoute.value;["/profile","/chat"].includes(p.path)&&!a.userStore.isAuthenticated&&(l.value=!0)}),(p,_)=>{const b=re("router-view");return k(),z("div",st,[r(ot),w("main",nt,[r(b),r(je,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=m=>l.value=m),onAuthSuccess:i},null,8,["modelValue"])])])}}});const ut=[{path:"/",name:"Dashboard",component:()=>V(()=>import("./Dashboard-25e81053.js"),["assets/Dashboard-25e81053.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Dashboard-3f8082f8.css"])},{path:"/poems",name:"Poems",component:()=>V(()=>import("./Poems-069394e4.js"),["assets/Poems-069394e4.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/mockData-3b1561c6.js","assets/Poems-e13b4da8.css"])},{path:"/analysis/:id",name:"Analysis",component:()=>V(()=>import("./Analysis-6ddfb2bb.js"),["assets/Analysis-6ddfb2bb.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/mockData-3b1561c6.js","assets/Analysis-e02ff6bd.css"]),props:!0},{path:"/poet-profile",name:"PoetProfile",component:()=>V(()=>import("./PoetProfile-66eceecb.js"),["assets/PoetProfile-66eceecb.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/PoetProfile-148952b0.css"])},{path:"/profile",name:"Profile",component:()=>V(()=>import("./Profile-97c1ad80.js"),["assets/Profile-97c1ad80.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/mockData-3b1561c6.js","assets/Profile-f15b0f10.css"])},{path:"/login",name:"Login",component:()=>V(()=>import("./Login-34b41e7b.js"),["assets/Login-34b41e7b.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Login-b911c56b.css"])},{path:"/register",name:"Register",component:()=>V(()=>import("./Register-ebe90f4e.js"),["assets/Register-ebe90f4e.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Register-c073e8f0.css"])},{path:"/settings",name:"Settings",component:()=>V(()=>import("./Settings-16a8565b.js"),["assets/Settings-16a8565b.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Settings-cf7181f4.css"])},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>V(()=>import("./NotFound-ed61ce5a.js"),["assets/NotFound-ed61ce5a.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/NotFound-16f288ea.css"])}],le=me({history:fe(),routes:ut});le.beforeEach(async(n,o,a)=>{try{const{supabase:l}=await V(()=>Promise.resolve().then(()=>Ne),void 0),{data:{user:i}}=await l.auth.getUser();["/profile"].includes(n.path)&&!i?a("/login"):a()}catch(l){console.error("路由守卫错误:",l),a()}});const q=_e(lt),it=ge();q.use(it);q.use(le);q.use(xe);q.mount("#app");console.log("诗韵星应用启动成功");export{ne as _,c as s,qe as u};
