import{d as x,g as c,X as y,c as R,b as a,a as s,w as o,q as P,m as i,k as U,r as u,o as T,K as f,L as q,_ as z}from"./main-f1684cbb.js";const C={class:"register-page"},E={class:"register-container"},B={class:"register-card"},F={class:"register-footer"},L={class:"login-link"},M=x({__name:"Register",setup(N){const w=U(),m=c(),p=c(!1),r=y({username:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(n,e,t)=>{e===""?t(new Error("请确认密码")):e!==r.password?t(new Error("两次输入密码不一致")):t()},trigger:"blur"}]},_=async()=>{if(m.value)try{if(await m.value.validate(),!r.agreeTerms){f.warning("请同意服务条款和隐私政策");return}p.value=!0;const{data:n,error:e}=await q.auth.signUp({email:r.email,password:r.password,options:{data:{username:r.username}}});if(e)throw e;n.user&&(f.success("注册成功！请检查您的邮箱验证账户"),w.push("/login"))}catch(n){console.error("注册失败:",n),f.error(n.message||"注册失败，请重试")}finally{p.value=!1}};return(n,e)=>{const t=u("el-input"),d=u("el-form-item"),g=u("router-link"),V=u("el-checkbox"),b=u("el-button"),k=u("el-form");return T(),R("div",C,[a("div",E,[a("div",B,[e[12]||(e[12]=a("div",{class:"register-header"},[a("h1",{class:"register-title"},"注册诗词分析平台"),a("p",{class:"register-subtitle"},"开启您的诗词学习之旅")],-1)),s(k,{model:r,rules:v,ref_key:"registerFormRef",ref:m,class:"register-form",onSubmit:P(_,["prevent"])},{default:o(()=>[s(d,{prop:"username"},{default:o(()=>[s(t,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(d,{prop:"email"},{default:o(()=>[s(t,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=l=>r.email=l),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:o(()=>[s(t,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=l=>r.password=l),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(d,{prop:"confirmPassword"},{default:o(()=>[s(t,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>r.confirmPassword=l),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(d,null,{default:o(()=>[s(V,{modelValue:r.agreeTerms,"onUpdate:modelValue":e[4]||(e[4]=l=>r.agreeTerms=l)},{default:o(()=>[e[7]||(e[7]=i(" 我已阅读并同意 ",-1)),s(g,{to:"/terms",class:"link"},{default:o(()=>[...e[5]||(e[5]=[i("服务条款",-1)])]),_:1}),e[8]||(e[8]=i(" 和 ",-1)),s(g,{to:"/privacy",class:"link"},{default:o(()=>[...e[6]||(e[6]=[i("隐私政策",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(d,null,{default:o(()=>[s(b,{type:"primary",size:"large",loading:p.value,disabled:!r.agreeTerms,onClick:_,class:"register-button"},{default:o(()=>[...e[9]||(e[9]=[i(" 注册 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"]),a("div",F,[a("p",L,[e[11]||(e[11]=i(" 已有账号？ ",-1)),s(g,{to:"/login",class:"link"},{default:o(()=>[...e[10]||(e[10]=[i("立即登录",-1)])]),_:1})])])])])])}}});const S=z(M,[["__scopeId","data-v-e25c5d04"]]);export{S as default};
