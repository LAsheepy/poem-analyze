import{by as de,r as A,c as F,q as B,a4 as j,y as H,O,P as o,C as P,E as v,W as t,a2 as X,T as g,bz as Z,z as Q,$ as ce,aX as ee,D,u as y,U as Y,S as x,bA as pe,bB as me,bv as _e,bC as fe}from"./vendor-0fc5911b.js";import{E as ge,a as U,b as he,c as ve,d as te,e as we,f as be,g as oe,h as ye,i as Ee,j as Ae,r as Ve,u as q,s as K,k as Ie,l as ke,n as Pe,m as Ue,o as Ce,p as Le,q as Se,t as Oe,v as Re,w as Te,x as xe}from"./element-plus-7b99588a.js";import{a as De,_ as I}from"./supabase-043902eb.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();const re="https://rnvpihtnbtltaulxsunc.supabase.co",ze="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJudnBpaHRuYnRsdGF1bHhzdW5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA1MTE0OTcsImV4cCI6MjA3NjA4NzQ5N30.URaYNJGKCMz1Lkfnhf7c0f8XR0Ip1t3aYIy41pAo08k",_=De(re,ze,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});re.includes("demo.supabase.co")&&console.warn("⚠️ 使用演示Supabase配置，请配置真实环境变量");const Ne=Object.freeze(Object.defineProperty({__proto__:null,supabase:_},Symbol.toStringTag,{value:"Module"})),G={async getCurrentUser(){const{data:{user:u}}=await _.auth.getUser();if(!u)return null;const{data:n,error:a}=await _.from("profiles").select("*").eq("id",u.id).single();if(a)throw a;return n},async upsertUser(u){const{data:{user:n}}=await _.auth.getUser();if(!n)throw new Error("用户未登录");const{data:a,error:i}=await _.from("profiles").upsert({id:n.id,...u,updated_at:new Date().toISOString()}).select().single();if(i)throw i;return a},async updateLearningProgress(u){const{data:{user:n}}=await _.auth.getUser();if(!n)throw new Error("用户未登录");const{data:a,error:i}=await _.from("profiles").update({learning_progress:u,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(i)throw i;return a}},Me=de("user",()=>{const u=A(null),n=A(!1),a=A(null),i=F(()=>u.value!==null),l=F(()=>{var e;return((e=u.value)==null?void 0:e.role)==="teacher"}),c=async()=>{n.value=!0,a.value=null;try{const e=await G.getCurrentUser();return u.value=e,e}catch(e){return a.value=e instanceof Error?e.message:"加载用户信息失败",console.error("加载用户信息失败:",e),null}finally{n.value=!1}},f=async e=>{n.value=!0,a.value=null;try{const r=await G.upsertUser(e);return u.value=r,r}catch(r){throw a.value=r instanceof Error?r.message:"保存用户信息失败",console.error("保存用户信息失败:",r),r}finally{n.value=!1}},p=()=>{u.value=null,a.value=null};return{user:u,isLoading:n,error:a,isAuthenticated:i,isTeacher:l,loadUser:c,upsertUser:f,clearUser:p,updateLearningProgress:async e=>{if(u.value)try{await G.updateLearningProgress(e),u.value.learningProgress=e}catch(r){throw a.value=r instanceof Error?r.message:"更新学习进度失败",console.error("更新学习进度失败:",r),r}},setupAuthListener:()=>{_.auth.onAuthStateChange(async(e,r)=>{e==="SIGNED_IN"&&(r!=null&&r.user)?await c():e==="SIGNED_OUT"&&p()})}}});function qe(){const u=Me(),n=F(()=>u.isAuthenticated&&!u.isLoading),a=async()=>{try{u.setupAuthListener();const p=await u.loadUser();return console.log(p?"应用初始化成功，用户已登录":"应用初始化成功，用户未登录"),!0}catch(p){return console.error("应用初始化失败:",p),!1}},i=()=>{u.clearUser()};return{userStore:u,isAppReady:n,initializeApp:a,resetApp:i,login:async(p,b)=>{try{const{data:m,error:e}=await _.auth.signInWithPassword({email:p,password:b});if(e)throw e;return m}catch(m){throw console.error("登录失败:",m),m}},register:async(p,b,m)=>{try{const{data:e,error:r}=await _.auth.signUp({email:p,password:b,options:{data:{username:m}}});if(r)throw r;return e}catch(e){throw console.error("注册失败:",e),e}},logout:async()=>{try{const{error:p}=await _.auth.signOut();if(p)throw p;i()}catch(p){throw console.error("登出失败:",p),p}}}}const Ge={class:"auth-modal-content"},Fe={class:"auth-divider"},Be={class:"social-auth"},$e=B({__name:"AuthModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","auth-success"],setup(u,{emit:n}){const a=u,i=n,l=A(!1),c=A("login"),f=A(!1),p=A(),b=A(),m=j({email:"",password:""}),e=j({username:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),r={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},N={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"用户名长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(d,s,V)=>{s===""?V(new Error("请确认密码")):s!==e.password?V(new Error("两次输入密码不一致")):V()},trigger:"blur"}]};H(()=>a.modelValue,d=>{l.value=d}),H(l,d=>{i("update:modelValue",d),d||E()});const M=()=>{l.value=!1},E=()=>{m.email="",m.password="",e.username="",e.email="",e.password="",e.confirmPassword="",e.agreeTerms=!1},C=async()=>{if(p.value)try{await p.value.validate(),f.value=!0;const{data:d,error:s}=await _.auth.signInWithPassword({email:m.email,password:m.password});if(s)throw s;d.user&&(U.success("登录成功"),i("auth-success"),l.value=!1)}catch(d){console.error("登录失败:",d),U.error(d.message||"登录失败，请检查邮箱和密码")}finally{f.value=!1}},L=async()=>{if(b.value)try{if(await b.value.validate(),!e.agreeTerms){U.warning("请同意服务条款和隐私政策");return}f.value=!0;const{data:d,error:s}=await _.auth.signUp({email:e.email,password:e.password,options:{data:{username:e.username}}});if(s)throw s;d.user&&(U.success("注册成功！请检查您的邮箱验证账户"),i("auth-success"),l.value=!1)}catch(d){console.error("注册失败:",d),U.error(d.message||"注册失败，请重试")}finally{f.value=!1}},S=async()=>{try{const{error:d}=await _.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(d)throw d}catch(d){console.error("GitHub登录失败:",d),U.error("GitHub登录失败")}},R=async()=>{try{const{error:d}=await _.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(d)throw d}catch(d){console.error("Google登录失败:",d),U.error("Google登录失败")}};return(d,s)=>{const V=he,k=ve,T=te,$=we,ne=be,J=oe,W=ye,le=Ee,ue=Ae,ie=ge;return P(),O(ie,{modelValue:l.value,"onUpdate:modelValue":s[8]||(s[8]=h=>l.value=h),title:"用户认证",width:"400px","before-close":M,"align-center":""},{default:o(()=>[v("div",Ge,[t(ue,{modelValue:c.value,"onUpdate:modelValue":s[7]||(s[7]=h=>c.value=h),class:"auth-tabs"},{default:o(()=>[t(W,{label:"登录",name:"login"},{default:o(()=>[t($,{model:m,rules:r,ref_key:"loginFormRef",ref:p,class:"auth-form",onSubmit:X(C,["prevent"])},{default:o(()=>[t(k,{prop:"email"},{default:o(()=>[t(V,{modelValue:m.email,"onUpdate:modelValue":s[0]||(s[0]=h=>m.email=h),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),t(k,{prop:"password"},{default:o(()=>[t(V,{modelValue:m.password,"onUpdate:modelValue":s[1]||(s[1]=h=>m.password=h),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),t(k,null,{default:o(()=>[t(T,{type:"primary",size:"large",loading:f.value,onClick:C,class:"auth-button"},{default:o(()=>[...s[9]||(s[9]=[g(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),v("div",Fe,[t(ne,null,{default:o(()=>[...s[10]||(s[10]=[g("或",-1)])]),_:1})]),v("div",Be,[t(T,{class:"social-button github",onClick:S},{default:o(()=>[t(J,null,{default:o(()=>[...s[11]||(s[11]=[v("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[v("path",{fill:"currentColor",d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0 8.1 0 16.3 1.9 24.1 0 0 0 0 0 0C831.1 885 956.4 718.9 956.4 523.5 956.4 276.4 756.1 76.3 511.6 76.3z"})],-1)])]),_:1}),s[12]||(s[12]=g(" GitHub登录 ",-1))]),_:1}),t(T,{class:"social-button google",onClick:R},{default:o(()=>[t(J,null,{default:o(()=>[...s[13]||(s[13]=[v("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[v("path",{fill:"currentColor",d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1C757.6 109.4 649.4 60 522.2 60 294.1 60 109.4 244.7 109.4 472.8c0 228.1 184.7 412.8 412.8 412.8 228.1 0 412.8-184.7 412.8-412.8 0-11.4-.5-22.7-1.5-34z"})],-1)])]),_:1}),s[14]||(s[14]=g(" Google登录 ",-1))]),_:1})])]),_:1}),t(W,{label:"注册",name:"register"},{default:o(()=>[t($,{model:e,rules:N,ref_key:"registerFormRef",ref:b,class:"auth-form",onSubmit:X(L,["prevent"])},{default:o(()=>[t(k,{prop:"username"},{default:o(()=>[t(V,{modelValue:e.username,"onUpdate:modelValue":s[2]||(s[2]=h=>e.username=h),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),t(k,{prop:"email"},{default:o(()=>[t(V,{modelValue:e.email,"onUpdate:modelValue":s[3]||(s[3]=h=>e.email=h),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),t(k,{prop:"password"},{default:o(()=>[t(V,{modelValue:e.password,"onUpdate:modelValue":s[4]||(s[4]=h=>e.password=h),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),t(k,{prop:"confirmPassword"},{default:o(()=>[t(V,{modelValue:e.confirmPassword,"onUpdate:modelValue":s[5]||(s[5]=h=>e.confirmPassword=h),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),t(k,null,{default:o(()=>[t(le,{modelValue:e.agreeTerms,"onUpdate:modelValue":s[6]||(s[6]=h=>e.agreeTerms=h)},{default:o(()=>[...s[15]||(s[15]=[g(" 我已阅读并同意服务条款和隐私政策 ",-1)])]),_:1},8,["modelValue"])]),_:1}),t(k,null,{default:o(()=>[t(T,{type:"primary",size:"large",loading:f.value,disabled:!e.agreeTerms,onClick:L,class:"auth-button"},{default:o(()=>[...s[16]||(s[16]=[g(" 注册 ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])}}});const ae=(u,n)=>{const a=u.__vccOpts||u;for(const[i,l]of n)a[i]=l;return a},Je=ae($e,[["__scopeId","data-v-6e020a66"]]),We={class:"navbar"},je={class:"navbar-container"},He={class:"navbar-brand"},Xe={class:"brand-logo"},Ye={key:0,class:"desktop-user-menu"},Ke={class:"user-dropdown"},Ze={class:"user-name"},Qe={key:1,class:"auth-buttons"},et={class:"mobile-menu"},tt=B({__name:"Navbar",setup(u){const n=Z();A("");const a=A(null);Q(async()=>{await i(),l()}),ce(()=>{const{data:{subscription:e}}=_.auth.onAuthStateChange(()=>{});e==null||e.unsubscribe()});const i=async()=>{try{const{data:{user:e}}=await _.auth.getUser();if(e){const{data:r}=await _.from("profiles").select("*").eq("id",e.id).single();a.value={...e,...r}}else a.value=null}catch(e){console.error("检查认证状态失败:",e),a.value=null}},l=()=>{_.auth.onAuthStateChange(async(e,r)=>{console.log("认证状态变化:",e),e==="SIGNED_IN"&&(r!=null&&r.user)?await i():e==="SIGNED_OUT"&&(a.value=null)})},c=e=>{switch(e){case"profile":n.push("/profile");break;case"settings":n.push("/settings");break;case"logout":m();break}},f=e=>{switch(e){case"home":n.push("/");break;case"poems":n.push("/poems");break;case"chat":n.push("/chat");break;case"profile":n.push("/profile");break;case"settings":n.push("/settings");break;case"login":n.push("/login");break;case"register":n.push("/register");break;case"logout":m();break}},p=()=>{n.push("/login")},b=()=>{n.push("/register")},m=async()=>{try{const{error:e}=await _.auth.signOut();if(e)throw e;a.value=null,U.success("退出登录成功"),n.push("/")}catch(e){console.error("退出登录失败:",e),U.error("退出登录失败")}};return(e,r)=>{const w=oe,N=ee("router-link"),M=Se,E=Oe,C=Re,L=Te,S=te;return P(),D("div",We,[v("div",je,[v("div",He,[t(N,{to:"/",class:"brand-link"},{default:o(()=>[v("div",Xe,[t(w,{size:"24",color:"#409eff"},{default:o(()=>[t(y(Ve))]),_:1})]),r[0]||(r[0]=v("span",{class:"brand-text"},"诗词分析平台",-1))]),_:1})]),a.value?(P(),D("div",Ye,[t(L,{onCommand:c},{dropdown:o(()=>[t(C,null,{default:o(()=>[t(E,{command:"profile"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(q))]),_:1}),r[1]||(r[1]=g(" 个人中心 ",-1))]),_:1}),t(E,{divided:"",command:"logout"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(K))]),_:1}),r[2]||(r[2]=g(" 退出登录 ",-1))]),_:1})]),_:1})]),default:o(()=>[v("span",Ke,[t(M,{size:32,src:a.value.avatar_url,class:"user-avatar"},{default:o(()=>{var R;return[g(Y(((R=a.value.username)==null?void 0:R.charAt(0))||"U"),1)]}),_:1},8,["src"]),v("span",Ze,Y(a.value.username||"用户"),1),t(w,null,{default:o(()=>[t(y(Ie))]),_:1})])]),_:1})])):(P(),D("div",Qe,[t(S,{type:"primary",text:"",onClick:p},{default:o(()=>[...r[3]||(r[3]=[g("登录",-1)])]),_:1}),t(S,{type:"primary",onClick:b},{default:o(()=>[...r[4]||(r[4]=[g("注册",-1)])]),_:1})])),v("div",et,[t(L,{onCommand:f},{dropdown:o(()=>[t(C,null,{default:o(()=>[t(E,{command:"home"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(ke))]),_:1}),r[5]||(r[5]=g(" 首页 ",-1))]),_:1}),t(E,{command:"poems"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(Pe))]),_:1}),r[6]||(r[6]=g(" 诗词库 ",-1))]),_:1}),t(E,{command:"chat"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(Ue))]),_:1}),r[7]||(r[7]=g(" AI助手 ",-1))]),_:1}),a.value?(P(),O(E,{key:0,command:"profile"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(q))]),_:1}),r[8]||(r[8]=g(" 个人中心 ",-1))]),_:1})):x("",!0),a.value?x("",!0):(P(),O(E,{key:1,divided:"",command:"login"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(q))]),_:1}),r[9]||(r[9]=g(" 登录 ",-1))]),_:1})),a.value?x("",!0):(P(),O(E,{key:2,command:"register"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(Ce))]),_:1}),r[10]||(r[10]=g(" 注册 ",-1))]),_:1})),a.value?(P(),O(E,{key:3,command:"logout"},{default:o(()=>[t(w,null,{default:o(()=>[t(y(K))]),_:1}),r[11]||(r[11]=g(" 退出登录 ",-1))]),_:1})):x("",!0)]),_:1})]),default:o(()=>[t(S,{text:""},{default:o(()=>[t(w,null,{default:o(()=>[t(y(Le))]),_:1})]),_:1})]),_:1})])])])}}});const ot=ae(tt,[["__scopeId","data-v-75b93bc7"]]),rt={id:"app"},at={class:"app-main"},st=B({__name:"App",setup(u){const n=Z(),a=qe(),i=A(!1),l=()=>{i.value=!1,n.go(0)};return Q(async()=>{await a.initializeApp();const c=n.currentRoute.value;["/profile","/chat"].includes(c.path)&&!a.userStore.isAuthenticated&&(i.value=!0)}),(c,f)=>{const p=ee("router-view");return P(),D("div",rt,[t(ot),v("main",at,[t(p),t(Je,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=b=>i.value=b),onAuthSuccess:l},null,8,["modelValue"])])])}}});const nt=[{path:"/",name:"Dashboard",component:()=>I(()=>import("./Dashboard-b0e4779a.js"),["assets/Dashboard-b0e4779a.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Dashboard-3f8082f8.css"])},{path:"/poems",name:"Poems",component:()=>I(()=>import("./Poems-7c61d8e7.js"),["assets/Poems-7c61d8e7.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/mockData-3b1561c6.js","assets/Poems-e13b4da8.css"])},{path:"/analysis/:id",name:"Analysis",component:()=>I(()=>import("./Analysis-2160484b.js"),["assets/Analysis-2160484b.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/mockData-3b1561c6.js","assets/Analysis-afb465cd.css"]),props:!0},{path:"/poet-profile",name:"PoetProfile",component:()=>I(()=>import("./PoetProfile-2da71245.js"),["assets/PoetProfile-2da71245.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/PoetProfile-148952b0.css"])},{path:"/profile",name:"Profile",component:()=>I(()=>import("./Profile-c323e742.js"),["assets/Profile-c323e742.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/mockData-3b1561c6.js","assets/Profile-f15b0f10.css"])},{path:"/login",name:"Login",component:()=>I(()=>import("./Login-de519db2.js"),["assets/Login-de519db2.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Login-b911c56b.css"])},{path:"/register",name:"Register",component:()=>I(()=>import("./Register-725aa376.js"),["assets/Register-725aa376.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Register-c073e8f0.css"])},{path:"/settings",name:"Settings",component:()=>I(()=>import("./Settings-db6f4c77.js"),["assets/Settings-db6f4c77.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/Settings-cf7181f4.css"])},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>I(()=>import("./NotFound-0d3caf8b.js"),["assets/NotFound-0d3caf8b.js","assets/element-plus-7b99588a.js","assets/vendor-0fc5911b.js","assets/supabase-043902eb.js","assets/element-plus-ae7eea91.css","assets/NotFound-16f288ea.css"])}],se=pe({history:me(),routes:nt});se.beforeEach(async(u,n,a)=>{try{const{supabase:i}=await I(()=>Promise.resolve().then(()=>Ne),void 0),{data:{user:l}}=await i.auth.getUser();["/profile"].includes(u.path)&&!l?a("/login"):a()}catch(i){console.error("路由守卫错误:",i),a()}});const z=_e(st),lt=fe();z.use(lt);z.use(se);z.use(xe);z.mount("#app");console.log("诗韵星应用启动成功");export{ae as _,_ as s,Me as u};
