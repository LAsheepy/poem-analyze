import{s as p,_ as V}from"./index-1a553d90.js";import{j as E,r as v,L as G,l as I,t,E as s,z as l,J as z,D as i,ae as B,a3 as L,k as W}from"./vendor-948b6be3.js";import{Q as n,T as F,U as M,V as R,R as H,S as T,W as N}from"./element-plus-b9ba9950.js";import"./supabase-204daf22.js";const U={class:"login-page"},q={class:"login-container"},A={class:"login-card"},D={class:"login-footer"},O={class:"register-link"},S={class:"social-login"},$={class:"social-buttons"},j=E({__name:"Login",setup(J){const w=B(),a=v(),d=v(!1),r=G({email:"",password:""}),h={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},m=async()=>{if(a.value)try{await a.value.validate(),d.value=!0;const{data:e,error:o}=await p.auth.signInWithPassword({email:r.email,password:r.password});if(o)throw o;e.user&&(n.success("登录成功"),w.push("/"))}catch(e){console.error("登录失败:",e),n.error(e.message||"登录失败，请检查邮箱和密码")}finally{d.value=!1}},b=async()=>{try{const{error:e}=await p.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e}catch(e){console.error("GitHub登录失败:",e),n.error("GitHub登录失败")}},k=async()=>{try{const{error:e}=await p.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e}catch(e){console.error("Google登录失败:",e),n.error("Google登录失败")}};return(e,o)=>{const _=H,u=T,c=F,y=M,C=L("router-link"),x=R,f=N;return W(),I("div",U,[t("div",q,[t("div",A,[o[10]||(o[10]=t("div",{class:"login-header"},[t("h1",{class:"login-title"},"登录诗词分析平台"),t("p",{class:"login-subtitle"},"开始您的诗词学习之旅")],-1)),s(y,{model:r,rules:h,ref_key:"loginFormRef",ref:a,class:"login-form",onSubmit:z(m,["prevent"])},{default:l(()=>[s(u,{prop:"email"},{default:l(()=>[s(_,{modelValue:r.email,"onUpdate:modelValue":o[0]||(o[0]=g=>r.email=g),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(u,{prop:"password"},{default:l(()=>[s(_,{modelValue:r.password,"onUpdate:modelValue":o[1]||(o[1]=g=>r.password=g),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(u,null,{default:l(()=>[s(c,{type:"primary",size:"large",loading:d.value,onClick:m,class:"login-button"},{default:l(()=>[...o[2]||(o[2]=[i(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",D,[t("p",O,[o[4]||(o[4]=i(" 还没有账号？ ",-1)),s(C,{to:"/register",class:"link"},{default:l(()=>[...o[3]||(o[3]=[i("立即注册",-1)])]),_:1})]),t("div",S,[s(x,null,{default:l(()=>[...o[5]||(o[5]=[i("或使用第三方登录",-1)])]),_:1}),t("div",$,[s(c,{class:"social-button github",onClick:b},{default:l(()=>[s(f,null,{default:l(()=>[...o[6]||(o[6]=[t("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[t("path",{fill:"currentColor",d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0 8.1 0 16.3 1.9 24.1 0 0 0 0 0 0C831.1 885 956.4 718.9 956.4 523.5 956.4 276.4 756.1 76.3 511.6 76.3z"})],-1)])]),_:1}),o[7]||(o[7]=i(" GitHub ",-1))]),_:1}),s(c,{class:"social-button google",onClick:k},{default:l(()=>[s(f,null,{default:l(()=>[...o[8]||(o[8]=[t("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[t("path",{fill:"currentColor",d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1C757.6 109.4 649.4 60 522.2 60 294.1 60 109.4 244.7 109.4 472.8c0 228.1 184.7 412.8 412.8 412.8 228.1 0 412.8-184.7 412.8-412.8 0-11.4-.5-22.7-1.5-34z"})],-1)])]),_:1}),o[9]||(o[9]=i(" Google ",-1))]),_:1})])])])])])])}}});const Y=V(j,[["__scopeId","data-v-bc9cc728"]]);export{Y as default};
