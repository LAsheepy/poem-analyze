import{d as G,g as w,X as L,c as z,b as t,a as s,w as l,q as B,m as n,k as M,L as m,K as a,r as i,o as W,_ as H}from"./main-f1684cbb.js";const I={class:"login-page"},R={class:"login-container"},q={class:"login-card"},F={class:"login-footer"},N={class:"register-link"},T={class:"social-login"},A={class:"social-buttons"},E=G({__name:"Login",setup(O){const h=M(),d=w(),u=w(!1),r=L({email:"",password:""}),b={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},_=async()=>{if(d.value)try{await d.value.validate(),u.value=!0;const{data:e,error:o}=await m.auth.signInWithPassword({email:r.email,password:r.password});if(o)throw o;e.user&&(a.success("登录成功"),h.push("/"))}catch(e){console.error("登录失败:",e),a.error(e.message||"登录失败，请检查邮箱和密码")}finally{u.value=!1}},k=async()=>{try{const{error:e}=await m.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e}catch(e){console.error("GitHub登录失败:",e),a.error("GitHub登录失败")}},y=async()=>{try{const{error:e}=await m.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e}catch(e){console.error("Google登录失败:",e),a.error("Google登录失败")}};return(e,o)=>{const f=i("el-input"),c=i("el-form-item"),g=i("el-button"),C=i("el-form"),x=i("router-link"),V=i("el-divider"),v=i("el-icon");return W(),z("div",I,[t("div",R,[t("div",q,[o[10]||(o[10]=t("div",{class:"login-header"},[t("h1",{class:"login-title"},"登录诗词分析平台"),t("p",{class:"login-subtitle"},"开始您的诗词学习之旅")],-1)),s(C,{model:r,rules:b,ref_key:"loginFormRef",ref:d,class:"login-form",onSubmit:B(_,["prevent"])},{default:l(()=>[s(c,{prop:"email"},{default:l(()=>[s(f,{modelValue:r.email,"onUpdate:modelValue":o[0]||(o[0]=p=>r.email=p),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(c,{prop:"password"},{default:l(()=>[s(f,{modelValue:r.password,"onUpdate:modelValue":o[1]||(o[1]=p=>r.password=p),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(c,null,{default:l(()=>[s(g,{type:"primary",size:"large",loading:u.value,onClick:_,class:"login-button"},{default:l(()=>[...o[2]||(o[2]=[n(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",F,[t("p",N,[o[4]||(o[4]=n(" 还没有账号？ ",-1)),s(x,{to:"/register",class:"link"},{default:l(()=>[...o[3]||(o[3]=[n("立即注册",-1)])]),_:1})]),t("div",T,[s(V,null,{default:l(()=>[...o[5]||(o[5]=[n("或使用第三方登录",-1)])]),_:1}),t("div",A,[s(g,{class:"social-button github",onClick:k},{default:l(()=>[s(v,null,{default:l(()=>[...o[6]||(o[6]=[t("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[t("path",{fill:"currentColor",d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0 8.1 0 16.3 1.9 24.1 0 0 0 0 0 0C831.1 885 956.4 718.9 956.4 523.5 956.4 276.4 756.1 76.3 511.6 76.3z"})],-1)])]),_:1}),o[7]||(o[7]=n(" GitHub ",-1))]),_:1}),s(g,{class:"social-button google",onClick:y},{default:l(()=>[s(v,null,{default:l(()=>[...o[8]||(o[8]=[t("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16"},[t("path",{fill:"currentColor",d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1C757.6 109.4 649.4 60 522.2 60 294.1 60 109.4 244.7 109.4 472.8c0 228.1 184.7 412.8 412.8 412.8 228.1 0 412.8-184.7 412.8-412.8 0-11.4-.5-22.7-1.5-34z"})],-1)])]),_:1}),o[9]||(o[9]=n(" Google ",-1))]),_:1})])])])])])])}}});const $=H(E,[["__scopeId","data-v-bc9cc728"]]);export{$ as default};
